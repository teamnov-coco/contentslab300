!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var r=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.getElementById(t),this.elementWidth=this.element.clientWidth,this.idx=0,this.maxIdx=n-1,this.isScrolling=!1,this.startX=0,this.memoryX=0,this.direction=null,this.moveEventCallback=null,this.element.addEventListener("touchstart",(function(e){i.sliderTouchStartListener(e)}),{passive:!0,capture:!1}),this.element.addEventListener("touchmove",(function(e){i.sliderTouchMoveListener(e)}),{passive:!0,capture:!1}),this.element.addEventListener("touchend",(function(e){i.sliderTouchEndListener(e)}),{passive:!0,capture:!1})}var t,n,r;return t=e,(n=[{key:"_scrollTo",value:function(e,t,n){var i=this;n=n||600;var r=(new Date).getTime(),o=r+n,s=t-e;requestAnimationFrame((function t(){var l=(new Date).getTime(),a=(l-r)/n;a=1===a?1:1-Math.pow(2,-10*a),l<=o?(i.element.scrollLeft=e+a*s,requestAnimationFrame(t)):i.element.scrollLeft=i.idx*i.elementWidth}))}},{key:"sliderTouchStartListener",value:function(e){this.isScrolling=!0,this.startX=e.touches[0].screenX}},{key:"sliderTouchMoveListener",value:function(e){var t=e.touches[0].screenX,n=Math.abs(Math.abs(t)-Math.abs(this.memoryX));10<=n&&(n=10),this.memoryX<t&&0!=this.memoryX?(this.element.scrollLeft-=n,this.direction=40>Math.abs(Math.abs(t)-Math.abs(this.startX))?null:"right"):this.memoryX>t&&(this.element.scrollLeft+=n,this.direction=40>Math.abs(Math.abs(t)-Math.abs(this.startX))?null:"left"),this.memoryX=t}},{key:"sliderTouchEndListener",value:function(e){this.isScrolling=!1,this.startX=0,"left"===this.direction&&this.maxIdx!=this.idx?(this.idx++,this._scrollTo(this.element.scrollLeft,this.idx*this.elementWidth,300),null!=this.moveEventCallback&&this.moveEventCallback({direction:"left"})):"right"===this.direction&&0!=this.idx?(this.idx--,this._scrollTo(this.element.scrollLeft,this.idx*this.elementWidth,300),null!=this.moveEventCallback&&this.moveEventCallback({direction:"right"})):this._scrollTo(this.element.scrollLeft,this.idx*this.elementWidth,50),this.memoryX=0}},{key:"resizingWrapper",value:function(){this.elementWidth=this.element.clientWidth,this.element.scrollLeft=this.idx*this.elementWidth}},{key:"moveTo",value:function(e){0>e||this.maxIdx<e?console.error("Overflow Slider Index."):(this.idx=e,this._scrollTo(this.element.scrollLeft,this.idx*this.elementWidth,300))}},{key:"prev",value:function(){0!=this.idx&&this.moveTo(--this.idx)}},{key:"next",value:function(){this.maxIdx!=this.idx&&this.moveTo(++this.idx)}},{key:"addMoveEventListener",value:function(e){this.moveEventCallback=e}},{key:"removeMoveEventListener",value:function(){this.moveEventCallback=null}}])&&i(t.prototype,n),r&&i(t,r),e}();function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=new r("cardWrap",10),a=document.getElementById("nav"),c=a.clientWidth,u=c/5,h=0;a.addEventListener("click",(function(e){var t,n=o(a.children);try{for(n.s();!(t=n.n()).done;){var i=t.value.classList;i.contains("on")&&i.remove("on")}}catch(e){n.e(e)}finally{n.f()}var r=e.target;r.classList.add("on");var s=r.dataset.idx;h<s&&2<s?a.scrollLeft+=u:h>s&&7>s&&(a.scrollLeft-=u),l.moveTo(s),h=s})),l.addMoveEventListener((function(e){var t,n=a.children,i=o(n);try{for(i.s();!(t=i.n()).done;){var r=t.value.classList;r.contains("on")&&r.remove("on")}}catch(e){i.e(e)}finally{i.f()}var s=l.idx;n[s].classList.add("on"),h<s&&2<s?a.scrollLeft+=u:h>s&&7>s&&(a.scrollLeft-=u),h=s})),window.addEventListener("touchstart",(function(e){l.isScrolling&&e.preventDefault()}),{passive:!1,capture:!1}),window.addEventListener("resize",(function(e){l.resizingWrapper(),c=a.clientWidth,u=c/5}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvc2xpZGVyLmpzIiwid2VicGFjazovLy8uL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU2xpZGVyIiwiaWQiLCJpdGVtQ291bnQiLCJ0aGlzIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJlbGVtZW50V2lkdGgiLCJjbGllbnRXaWR0aCIsImlkeCIsIm1heElkeCIsImlzU2Nyb2xsaW5nIiwic3RhcnRYIiwibWVtb3J5WCIsImRpcmVjdGlvbiIsIm1vdmVFdmVudENhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInNsaWRlclRvdWNoU3RhcnRMaXN0ZW5lciIsInBhc3NpdmUiLCJjYXB0dXJlIiwic2xpZGVyVG91Y2hNb3ZlTGlzdGVuZXIiLCJzbGlkZXJUb3VjaEVuZExpc3RlbmVyIiwiZW5kWCIsImR1cmF0aW9uIiwic3RhcnRUaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJlbmRUaW1lIiwid2lsbERpc3RhbmNlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsIm5vd1RpbWUiLCJwcm9ncmVzcyIsIk1hdGgiLCJwb3ciLCJzY3JvbGxMZWZ0IiwidG91Y2hlcyIsInNjcmVlblgiLCJjdXJyZW50WCIsIm1vdmVkUGl4ZWwiLCJhYnMiLCJfc2Nyb2xsVG8iLCJudW1iZXIiLCJjb25zb2xlIiwiZXJyb3IiLCJtb3ZlVG8iLCJjYWxsYmFjayIsInNsaWRlciIsIm5hdiIsIm5hdldpZHRoIiwibmF2VW5pdCIsIm1lbUlkeCIsImUiLCJjaGlsZHJlbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGd0IiwidGFyZ2V0IiwiYWRkIiwiZGF0YXNldCIsImlmTWF4Q291bnQiLCJhZGRNb3ZlRXZlbnRMaXN0ZW5lciIsImltYWdlcyIsIndpbmRvdyIsInByZXZlbnREZWZhdWx0IiwicmVzaXppbmdXcmFwcGVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FE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T0FBT2pELGlCQUFpQixjQUFjLFNBQUNxQyxHQUMvQkwsRUFBT3JDLGFBQ1AwQyxFQUFFYSxtQkFFUCxDQUNDL0MsU0FBUyxFQUNUQyxTQUFTLElBR2I2QyxPQUFPakQsaUJBQWlCLFVBQVUsU0FBQ3FDLEdBQy9CTCxFQUFPbUIsa0JBQ1BqQixFQUFXRCxFQUFJekMsWUFDZjJDLEVBQVVELEVBQVciLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgaXRlbUNvdW50KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudFdpZHRoID0gdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLmlkeCA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXhJZHggPSBpdGVtQ291bnQgLSAxO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2Nyb2xsaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gMDtcclxuICAgICAgICB0aGlzLm1lbW9yeVggPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG51bGw7IC8qbGVmdCBvciByaWdodCAqL1xyXG5cclxuICAgICAgICB0aGlzLm1vdmVFdmVudENhbGxiYWNrID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZXZ0KT0+e1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlclRvdWNoU3RhcnRMaXN0ZW5lcihldnQpO1xyXG4gICAgICAgIH0sIHtwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiBmYWxzZX0pO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGV2dCk9PntcclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJUb3VjaE1vdmVMaXN0ZW5lcihldnQpO1xyXG4gICAgICAgIH0sIHtwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiBmYWxzZX0pO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZXZ0KT0+e1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlclRvdWNoRW5kTGlzdGVuZXIoZXZ0KTtcclxuICAgICAgICB9LCB7cGFzc2l2ZTogdHJ1ZSwgY2FwdHVyZTogZmFsc2V9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX3Njcm9sbFRvKHN0YXJ0WCwgZW5kWCwgZHVyYXRpb24pIHtcclxuICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uID8gZHVyYXRpb24gOiA2MDA7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIGR1cmF0aW9uO1xyXG4gICAgICAgIGNvbnN0IHdpbGxEaXN0YW5jZSA9IGVuZFggLSBzdGFydFg7XHJcblxyXG4gICAgICAgIGNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFzc2VkVGltZSA9IG5vd1RpbWUgLSBzdGFydFRpbWU7XHJcbiAgICAgICAgICAgIGxldCBwcm9ncmVzcyA9IHBhc3NlZFRpbWUgLyBkdXJhdGlvbjtcclxuICAgICAgICAgICAgLyogZWFzZU91dEV4cG8gKi9cclxuICAgICAgICAgICAgcHJvZ3Jlc3MgPSAoKHByb2dyZXNzID09PSAxKSA/IDEgOiAoMSAtIE1hdGgucG93KDIsIC0xMCAqIHByb2dyZXNzKSkpO1xyXG4gICAgICAgICAgICBpZihub3dUaW1lIDw9IGVuZFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0ID0gc3RhcnRYICsgKHByb2dyZXNzICogd2lsbERpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbExlZnQgPSAodGhpcy5pZHggKiB0aGlzLmVsZW1lbnRXaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGVyVG91Y2hTdGFydExpc3RlbmVyKGV2dCkge1xyXG4gICAgICAgIHRoaXMuaXNTY3JvbGxpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gZXZ0LnRvdWNoZXNbMF0uc2NyZWVuWDtcclxuICAgIH1cclxuXHJcbiAgICBzbGlkZXJUb3VjaE1vdmVMaXN0ZW5lcihldnQpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50WCA9IGV2dC50b3VjaGVzWzBdLnNjcmVlblg7XHJcblxyXG4gICAgICAgIGxldCBtb3ZlZFBpeGVsID0gTWF0aC5hYnMoTWF0aC5hYnMoY3VycmVudFgpIC0gTWF0aC5hYnModGhpcy5tZW1vcnlYKSk7XHJcblxyXG4gICAgICAgIGlmKDEwIDw9IG1vdmVkUGl4ZWwpIHtcclxuICAgICAgICAgICAgbW92ZWRQaXhlbCA9IDEwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5tZW1vcnlYIDwgY3VycmVudFggJiYgMCAhPSB0aGlzLm1lbW9yeVgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0IC09IG1vdmVkUGl4ZWw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICg0MCA+IE1hdGguYWJzKE1hdGguYWJzKGN1cnJlbnRYKSAtIE1hdGguYWJzKHRoaXMuc3RhcnRYKSkpID8gbnVsbCA6ICdyaWdodCc7XHJcblxyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMubWVtb3J5WCA+IGN1cnJlbnRYKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCArPSBtb3ZlZFBpeGVsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAoNDAgPiBNYXRoLmFicyhNYXRoLmFicyhjdXJyZW50WCkgLSBNYXRoLmFicyh0aGlzLnN0YXJ0WCkpKSA/IG51bGwgOiAnbGVmdCc7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tZW1vcnlYID0gY3VycmVudFg7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNsaWRlclRvdWNoRW5kTGlzdGVuZXIoZXZ0KSB7XHJcbiAgICAgICAgdGhpcy5pc1Njcm9sbGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gMDtcclxuXHJcbiAgICAgICAgaWYoJ2xlZnQnID09PSB0aGlzLmRpcmVjdGlvbiAmJiB0aGlzLm1heElkeCAhPSB0aGlzLmlkeCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZHgrKztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRvKHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0LCAodGhpcy5pZHggKiB0aGlzLmVsZW1lbnRXaWR0aCksIDMwMCk7XHJcblxyXG4gICAgICAgICAgICBpZihudWxsICE9IHRoaXMubW92ZUV2ZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZUV2ZW50Q2FsbGJhY2soe2RpcmVjdGlvbjogJ2xlZnQnfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfWVsc2UgaWYoJ3JpZ2h0JyA9PT0gdGhpcy5kaXJlY3Rpb24gJiYgMCAhPSB0aGlzLmlkeCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZHgtLTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRvKHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0LCAodGhpcy5pZHggKiB0aGlzLmVsZW1lbnRXaWR0aCksIDMwMCk7XHJcblxyXG4gICAgICAgICAgICBpZihudWxsICE9IHRoaXMubW92ZUV2ZW50Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZUV2ZW50Q2FsbGJhY2soe2RpcmVjdGlvbjogJ3JpZ2h0J30pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1lbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRvKHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0LCAodGhpcy5pZHggKiB0aGlzLmVsZW1lbnRXaWR0aCksIDUwKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1lbW9yeVggPSAwO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXNpemluZ1dyYXBwZXIoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50V2lkdGggPSB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbExlZnQgPSB0aGlzLmlkeCAqIHRoaXMuZWxlbWVudFdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUbyhudW1iZXIpIHtcclxuICAgICAgICBpZigwID4gbnVtYmVyIHx8IHRoaXMubWF4SWR4IDwgbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ092ZXJmbG93IFNsaWRlciBJbmRleC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkeCA9IG51bWJlcjtcclxuICAgICAgICB0aGlzLl9zY3JvbGxUbyh0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCwgKHRoaXMuaWR4ICogdGhpcy5lbGVtZW50V2lkdGgpLCAzMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXYoKSB7XHJcbiAgICAgICAgaWYoMCAhPSB0aGlzLmlkeCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVUbygtLXRoaXMuaWR4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dCgpIHtcclxuICAgICAgICBpZih0aGlzLm1heElkeCAhPSB0aGlzLmlkeCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVUbygrK3RoaXMuaWR4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTW92ZUV2ZW50TGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm1vdmVFdmVudENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTW92ZUV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlRXZlbnRDYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IFNsaWRlciBmcm9tICcuL2pzL3NsaWRlcic7XHJcbmltcG9ydCBOYXZpZ2F0b3IgZnJvbSAnLi9qcy9uYXZpZ2F0b3IuanMnOyB7XHJcbiAgICBjb25zdCBzbGlkZXIgPSBuZXcgU2xpZGVyKCdjYXJkV3JhcCcsIDEwKTtcclxuICAgIC8vIGNvbnN0IG5hdmlnYXRvciA9IG5ldyBOYXZpZ2F0b3IoJ2NhcmROYXYnLCAnbGVmdEJ0bicsICdyaWdodEJ0bicsIDEwKTtcclxuXHJcbiAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2Jyk7XHJcblxyXG5cclxuICAgIGNvbnN0IGlmTWF4Q291bnQgPSAxMDtcclxuXHJcbiAgICBsZXQgbmF2V2lkdGggPSBuYXYuY2xpZW50V2lkdGg7XHJcbiAgICBsZXQgbmF2VW5pdCA9IG5hdldpZHRoIC8gNTtcclxuICAgIGxldCBtZW1JZHggPSAwO1xyXG4gICAgY29uc3QgbGVmdE1heElkeCA9IDI7XHJcbiAgICBjb25zdCByaWdodE1heElkeCA9IGlmTWF4Q291bnQgLSAzXHJcblxyXG4gICAgbmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAvKiDsnbTrr7jsp4Ag7ISg7YOd7IucICovXHJcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gbmF2LmNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAobGV0IGltYWdlIG9mIGltYWdlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjbGFzc0xpc3QgPSBpbWFnZS5jbGFzc0xpc3Q7XHJcbiAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ29uJykpIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRndCA9IGUudGFyZ2V0O1xyXG4gICAgICAgIHRndC5jbGFzc0xpc3QuYWRkKCdvbicpO1xyXG5cclxuICAgICAgICBjb25zdCBpZHggPSB0Z3QuZGF0YXNldC5pZHg7XHJcblxyXG4gICAgICAgIGlmIChtZW1JZHggPCBpZHggJiYgbGVmdE1heElkeCA8IGlkeCkge1xyXG4gICAgICAgICAgICBuYXYuc2Nyb2xsTGVmdCArPSBuYXZVbml0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWVtSWR4ID4gaWR4ICYmIHJpZ2h0TWF4SWR4ID4gaWR4KSB7XHJcbiAgICAgICAgICAgIG5hdi5zY3JvbGxMZWZ0IC09IG5hdlVuaXQ7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHNsaWRlci5tb3ZlVG8oaWR4KTtcclxuXHJcbiAgICAgICAgbWVtSWR4ID0gaWR4O1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2xpZGVyLmFkZE1vdmVFdmVudExpc3RlbmVyKChlKSA9PiB7XHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm1vdmVUb0RpcmVjdGlvbihlLmRpcmVjdGlvbik7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gbmF2LmNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAobGV0IGltYWdlIG9mIGltYWdlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjbGFzc0xpc3QgPSBpbWFnZS5jbGFzc0xpc3Q7XHJcbiAgICAgICAgICAgIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ29uJykpIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlkeCA9IHNsaWRlci5pZHg7XHJcblxyXG4gICAgICAgIGltYWdlc1tpZHhdLmNsYXNzTGlzdC5hZGQoJ29uJylcclxuXHJcbiAgICAgICAgaWYgKG1lbUlkeCA8IGlkeCAmJiBsZWZ0TWF4SWR4IDwgaWR4KSB7XHJcbiAgICAgICAgICAgIG5hdi5zY3JvbGxMZWZ0ICs9IG5hdlVuaXQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZW1JZHggPiBpZHggJiYgcmlnaHRNYXhJZHggPiBpZHgpIHtcclxuICAgICAgICAgICAgbmF2LnNjcm9sbExlZnQgLT0gbmF2VW5pdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lbUlkeCA9IGlkeDtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKHNsaWRlci5pc1Njcm9sbGluZykge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICAgIHBhc3NpdmU6IGZhbHNlLFxyXG4gICAgICAgIGNhcHR1cmU6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKGUpID0+IHtcclxuICAgICAgICBzbGlkZXIucmVzaXppbmdXcmFwcGVyKCk7XHJcbiAgICAgICAgbmF2V2lkdGggPSBuYXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgbmF2VW5pdCA9IG5hdldpZHRoIC8gNTtcclxuICAgIH0pO1xyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=